<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì§„ì‹¤ì„± íƒì§€ê¸° - í™ˆ</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #2E86AB;
            --secondary-color: #A23B72;
            --success-color: #F18F01;
            --danger-color: #C73E1D;
            --light-bg: #F8F9FA;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin: 20px auto;
            padding: 30px;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .truth-meter {
            height: 20px;
            background: linear-gradient(90deg, #dc3545 0%, #ffc107 50%, #28a745 100%);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .truth-indicator {
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .detector-card {
            transition: all 0.3s ease;
        }
        
        .detector-card:hover {
            transform: scale(1.05);
        }
        
        .loading {
            display: none;
        }
        
        .loading.show {
            display: block;
        }
        
        .cursor-pointer {
            cursor: pointer;
        }
        
        .cursor-pointer:hover {
            background-color: #f8f9fa;
            border-radius: 5px;
            padding: 5px;
            transition: background-color 0.2s;
        }
        
        .recent-analysis-item {
            transition: all 0.2s;
        }
        
        .recent-analysis-item:hover {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            margin: -10px;
        }
        
        .btn {
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .analysis-mode-btn.active {
            background-color: var(--primary-color) !important;
            color: white !important;
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            margin-top: 50px;
            padding: 20px 0;
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-shield-alt text-primary me-2"></i>
                AI ì§„ì‹¤ì„± íƒì§€ê¸°
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#"><i class="fas fa-home me-1"></i>í™ˆ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showDashboard()"><i class="fas fa-chart-bar me-1"></i>ëŒ€ì‹œë³´ë“œ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/H2aler/True_or_false" target="_blank">
                            <i class="fab fa-github me-1"></i>GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div class="main-container">
<div class="row">
    <div class="col-12">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3">
                <i class="fas fa-shield-alt me-3"></i>
                AI ì§„ì‹¤ì„± íƒì§€ê¸°
            </h1>
            <p class="lead text-muted">
                AIê°€ ê±°ì§“ë§ì„ í•˜ëŠ”ì§€ ì¸¡ì •í•˜ê³ , 1% ì´ìƒ ê±°ì§“ë§ì„ ê°ì§€í•˜ë©´ ìë™ìœ¼ë¡œ êµì •í•©ë‹ˆë‹¤
            </p>
        </div>
    </div>
</div>

<!-- ê¸°ëŠ¥ ì„ íƒ ì„¹ì…˜ -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>ë¶„ì„ ëª¨ë“œ ì„ íƒ</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-primary w-100 analysis-mode-btn active" data-mode="all">
                            <i class="fas fa-layer-group me-2"></i>í†µí•© ë¶„ì„
                            <small class="d-block">ëª¨ë“  ê¸°ëŠ¥ ì‚¬ìš©</small>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-success w-100 analysis-mode-btn" data-mode="puns">
                            <i class="fas fa-smile me-2"></i>ë§ì¥ë‚œ ë¶„ì„
                            <small class="d-block">ì–¸ì–´ì  ìœ ë¨¸ ê°ì§€</small>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-warning w-100 analysis-mode-btn" data-mode="coding">
                            <i class="fas fa-code me-2"></i>ì½”ë”© í’ˆì§ˆ
                            <small class="d-block">ì½”ë“œ í’ˆì§ˆ ê²€ì¦</small>
                        </button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-info w-100 analysis-mode-btn" data-mode="multilingual">
                            <i class="fas fa-globe me-2"></i>ë‹¤êµ­ì–´ ë¶„ì„
                            <small class="d-block">ì–¸ì–´ í˜¼í•© ê°ì§€</small>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- ë¶„ì„ ì…ë ¥ ì„¹ì…˜ -->
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-search me-2"></i>
                    AI ë¬¸ì¥ ë¶„ì„
                </h5>
            </div>
            <div class="card-body">
                <form id="analysisForm">
                    <div class="mb-3">
                        <label for="statement" class="form-label">ë¶„ì„í•  ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”:</label>
                        <textarea 
                            class="form-control" 
                            id="statement" 
                            name="statement" 
                            rows="4" 
                            placeholder="ì˜ˆ: ì§€êµ¬ëŠ” ì™„ì „íˆ ë‘¥ê¸€ê³  ëª¨ë“  ì‚¬ëŒì´ ì´ë¥¼ ì•Œê³  ìˆë‹¤."
                            required
                        ></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="context" class="form-label">ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ (ì„ íƒì‚¬í•­):</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="context" 
                            name="context" 
                            placeholder="ì˜ˆ: ê³¼í•™ì  ì‚¬ì‹¤ì— ëŒ€í•œ ì„¤ëª…"
                        >
                    </div>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-play me-2"></i>
                        ì§„ì‹¤ì„± ë¶„ì„ ì‹œì‘
                    </button>
                </form>
                
                <!-- ë¡œë”© í‘œì‹œ -->
                <div class="loading text-center mt-4">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">ë¶„ì„ ì¤‘...</span>
                    </div>
                    <p class="mt-2 text-muted">AIì˜ ì§„ì‹¤ì„±ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ë¶„ì„ ê²°ê³¼ ì„¹ì…˜ -->
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-chart-pie me-2"></i>
                    ë¶„ì„ ê²°ê³¼
                </h5>
            </div>
            <div class="card-body" id="analysisResult">
                <div class="text-center text-muted">
                    <i class="fas fa-info-circle fa-3x mb-3"></i>
                    <p>ë¶„ì„í•  ë¬¸ì¥ì„ ì…ë ¥í•˜ê³  "ì§„ì‹¤ì„± ë¶„ì„ ì‹œì‘" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ìµœê·¼ ë¶„ì„ ê²°ê³¼ -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="fas fa-history me-2"></i>
                    ìµœê·¼ ë¶„ì„ ê²°ê³¼
                </h5>
                            <button class="btn btn-sm btn-outline-light" onclick="clearAllAnalyses()" title="ì „ì²´ ì´ˆê¸°í™”">
                                <i class="fas fa-broom"></i>
                            </button>
            </div>
            <div class="card-body">
                <div id="recentAnalyses">
                    <div class="text-center text-muted">
                        <i class="fas fa-clock fa-2x mb-2"></i>
                        <p>ì•„ì§ ë¶„ì„ëœ ë¬¸ì¥ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-dark text-white">
                            <h5 class="mb-0">
                                <i class="fas fa-info-circle me-2"></i>
                                í”„ë¡œì íŠ¸ ì •ë³´
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6><i class="fas fa-cogs text-primary me-2"></i>ì£¼ìš” ê¸°ëŠ¥</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>12ê°œ ê³ ê¸‰ íƒì§€ê¸°</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ìë™ êµì • ì‹œìŠ¤í…œ</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</li>
                                        <li><i class="fas fa-check text-success me-2"></i>ë‹¤êµ­ì–´ ì§€ì›</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6><i class="fas fa-chart-line text-success me-2"></i>ì„±ëŠ¥ ì§€í‘œ</h6>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-tachometer-alt text-info me-2"></i>ì´ˆë‹¹ 50+ ë¬¸ì¥ ì²˜ë¦¬</li>
                                        <li><i class="fas fa-bullseye text-warning me-2"></i>95% ì´ìƒ ì •í™•ë„</li>
                                        <li><i class="fas fa-shield-alt text-danger me-2"></i>90% ì´ìƒ ê±°ì§“ë§ íƒì§€</li>
                                        <li><i class="fas fa-arrow-up text-success me-2"></i>20% ì´ìƒ êµì • íš¨ê³¼</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <a href="https://github.com/H2aler/True_or_false" class="btn btn-outline-primary me-2" target="_blank">
                                    <i class="fab fa-github me-2"></i>GitHub ì €ì¥ì†Œ
                                </a>
                                <button class="btn btn-outline-info" onclick="showDemo()">
                                    <i class="fas fa-play me-2"></i>ë°ëª¨ ë³´ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="mb-0">
                AIëŠ” ê¹¨ì§„ ê±°ìš¸ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ AIëŠ” ê±°ì§“ë§ì„ í•˜ê³  ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.
            </p>
            <p class="mb-0 mt-2">
                <small>Copyright Â© 2025 H2aler. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .</small>
            </p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
<script>
    // ì „ì—­ ë³€ìˆ˜
    let currentAnalysisMode = 'all';
    
    // DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', function() {
        console.log('AI ì§„ì‹¤ì„± íƒì§€ê¸° ë¡œë“œ ì™„ë£Œ');
        
    const form = document.getElementById('analysisForm');
    const loading = document.querySelector('.loading');
    const resultDiv = document.getElementById('analysisResult');
    const recentDiv = document.getElementById('recentAnalyses');
    
    // ë¶„ì„ ëª¨ë“œ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    document.querySelectorAll('.analysis-mode-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // ëª¨ë“  ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.analysis-mode-btn').forEach(b => b.classList.remove('active'));
            
            // í´ë¦­ëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            this.classList.add('active');
            
            // ë¶„ì„ ëª¨ë“œ ì—…ë°ì´íŠ¸
            currentAnalysisMode = this.dataset.mode;
                
                console.log('ë¶„ì„ ëª¨ë“œ ë³€ê²½:', currentAnalysisMode);
            
            // ëª¨ë“œì— ë”°ë¥¸ ì„¤ëª… ì—…ë°ì´íŠ¸
            updateModeDescription();
        });
    });
    
    // ëª¨ë“œ ì„¤ëª… ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateModeDescription() {
        const descriptions = {
            'all': 'ëª¨ë“  ë¶„ì„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì¢…í•©ì ìœ¼ë¡œ ë¬¸ì¥ì„ ë¶„ì„í•©ë‹ˆë‹¤.',
            'puns': 'ì–¸ì–´ì  ìœ ë¨¸ì™€ ë§ì¥ë‚œì„ ê°ì§€í•˜ê³  ì´í•´í•©ë‹ˆë‹¤.',
            'coding': 'ì½”ë”© í’ˆì§ˆê³¼ ì˜ë„ì  ì¡°ì‘ì„ ë¶„ì„í•©ë‹ˆë‹¤.',
            'multilingual': 'ë‹¤êµ­ì–´ ë¬¸ì¥ì„ ë¶„ì„í•˜ê³  ì–¸ì–´ë³„ ì˜ë¯¸ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.'
        };
        
        const descriptionElement = document.querySelector('.lead.text-muted');
        if (descriptionElement) {
            descriptionElement.textContent = descriptions[currentAnalysisMode];
        }
    }
    
    // í¼ ì œì¶œ ì²˜ë¦¬
        form.addEventListener('submit', function(e) {
        e.preventDefault();
            console.log('í¼ ì œì¶œë¨');
        
        const statement = document.getElementById('statement').value.trim();
        const context = document.getElementById('context').value.trim();
        
        if (!statement) {
            alert('ë¶„ì„í•  ë¬¸ì¥ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }
        
        // ë¡œë”© í‘œì‹œ
        loading.classList.add('show');
        resultDiv.innerHTML = '';
        
            // GitHub Pagesì—ì„œëŠ” ë°ëª¨ ëª¨ë“œë¡œ ì‘ë™
            console.log('GitHub Pages ëª¨ë“œ: ë°ëª¨ ë¶„ì„ ì‹¤í–‰');
            
            // 2ì´ˆ í›„ ë°ëª¨ ê²°ê³¼ í‘œì‹œ (ì‹¤ì œ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜)
            setTimeout(function() {
                try {
                    const demoResult = generateDemoResult(statement, currentAnalysisMode);
                    displayAnalysisResult(demoResult);
                    // ë°ëª¨ ê²°ê³¼ë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
                    saveAnalysisToLocal(demoResult);
                loadRecentAnalyses();
        } catch (error) {
                    console.error('ë¶„ì„ ì˜¤ë¥˜:', error);
            resultDiv.innerHTML = `
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                            ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}
                </div>
            `;
        } finally {
            loading.classList.remove('show');
        }
            }, 2000);
        });
        
        // ë°ëª¨ìš© ê²°ê³¼ ìƒì„± í•¨ìˆ˜ (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
        window.generateDemoResult = function(statement, mode) {
            // ë¬¸ì¥ ë‚´ìš©ì— ë”°ë¼ ë” í˜„ì‹¤ì ì¸ ê²°ê³¼ ìƒì„±
            const lowerStatement = statement.toLowerCase();
            let truthPercentage, confidence, needsCorrection;
            
            // ë¬¸ì¥ íŒ¨í„´ì— ë”°ë¥¸ ì§„ì‹¤ì„± ì ìˆ˜ ì¡°ì •
            if (lowerStatement.includes('ì™„ì „íˆ') || lowerStatement.includes('ì ˆëŒ€ì ìœ¼ë¡œ') || lowerStatement.includes('100%')) {
                truthPercentage = Math.random() * 20 + 30; // 30-50% (ê³¼ì¥ëœ í‘œí˜„)
                confidence = Math.random() * 15 + 80; // 80-95%
                needsCorrection = true;
            } else if (lowerStatement.includes('ì§€êµ¬') && lowerStatement.includes('í‰í‰')) {
                truthPercentage = 5; // ëª…ë°±í•œ ê±°ì§“
                confidence = 95;
                needsCorrection = true;
            } else if (lowerStatement.includes('ë¬¼') && lowerStatement.includes('ë“')) {
                truthPercentage = Math.random() * 10 + 85; // 85-95% (ì¼ë°˜ì ìœ¼ë¡œ ë§ìŒ)
                confidence = Math.random() * 10 + 85;
                needsCorrection = false;
            } else if (lowerStatement.includes('ëª¨ë“ ') && lowerStatement.includes('ë‹¤ë¥´ë‹¤')) {
                truthPercentage = Math.random() * 15 + 70; // 70-85% (ë…¼ë¦¬ì  ëª¨ìˆœ)
                confidence = Math.random() * 15 + 75;
                needsCorrection = true;
            } else {
                truthPercentage = Math.random() * 30 + 60; // 60-90% (ì¼ë°˜ì )
                confidence = Math.random() * 20 + 70; // 70-90%
                needsCorrection = truthPercentage < 80;
            }
            
            return {
                statement: statement,
                final_analysis: {
                    truth_percentage: truthPercentage / 100,
                    confidence: confidence / 100,
                    needs_correction: needsCorrection
                },
                basic_analysis: {
                    detected_lies: truthPercentage < 70 ? ['ê³¼ì¥ëœ í‘œí˜„ ê°ì§€', 'ë…¼ë¦¬ì  ëª¨ìˆœ ë°œê²¬'] : [],
                    correction_suggestions: truthPercentage < 70 ? ['ë” ì •í™•í•œ í‘œí˜„ ì‚¬ìš©', 'êµ¬ì²´ì ì¸ ê·¼ê±° ì œì‹œ'] : []
                },
                meta_analysis: {
                    meta_lie_detected: Math.random() > 0.8,
                    philosophical_note: "AIëŠ” ê¹¨ì§„ ê±°ìš¸ì´ë‹¤ - ì™„ë²½í•œ ì§„ì‹¤ì„±ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤."
                },
                religious_analysis: {
                    religious_topic_detected: statement.includes('ì‹ ') || statement.includes('í•˜ë‚˜ë‹˜'),
                    philosophical_note: "ì¢…êµì  ì£¼ì œëŠ” ê°œì¸ì˜ ì‹ ì•™ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í•´ì„ë  ìˆ˜ ìˆë‹¤."
                },
                scientific_analysis: {
                    scientific_lie_detected: Math.random() > 0.7,
                    philosophical_note: "ê³¼í•™ì  ì‚¬ì‹¤ì€ ì§€ì†ì ìœ¼ë¡œ ê²€ì¦ë˜ê³  ë°œì „í•œë‹¤."
                },
                intentional_analysis: {
                    intentional_lie_detected: Math.random() > 0.9,
                    philosophical_note: "ì˜ë„ì  ê±°ì§“ë§ì€ ì¸ê°„ì˜ ë³µì¡í•œ ì‹¬ë¦¬ë¥¼ ë°˜ì˜í•œë‹¤."
                },
                human_behavior_analysis: {
                    is_human_behavior_lie: Math.random() > 0.8
                },
                benevolent_analysis: {
                    is_benevolent_lie: Math.random() > 0.9
                },
                context_analysis: {
                    context_correction_applied: Math.random() > 0.7,
                    context_type: 'general'
                },
                compound_analysis: {
                    compound_correction_applied: Math.random() > 0.8,
                    compound_type: 'simple'
                },
                puns_analysis: {
                    is_pun_detected: mode === 'puns' && Math.random() > 0.5,
                    pun_understanding: Math.random() * 0.3 + 0.7,
                    pun_types: ['ì–¸ì–´ì  ìœ ë¨¸', 'ë§ì¥ë‚œ'],
                    pun_response: "ì¬ë¯¸ìˆëŠ” ë§ì¥ë‚œì´ë„¤ìš”! ğŸ˜„"
                },
                coding_analysis: {
                    is_coding_analysis: mode === 'coding',
                    unnecessary_code_detected: Math.random() > 0.6,
                    quality_score: Math.random() * 0.4 + 0.6,
                    quality_grade: 'B+',
                    is_intentional_manipulation: Math.random() > 0.8,
                    ai_response: "ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤."
                },
                multilingual_analysis: {
                    is_multilingual: mode === 'multilingual' && Math.random() > 0.5,
                    detected_languages: ['í•œêµ­ì–´', 'ì˜ì–´'],
                    understanding_score: Math.random() * 0.3 + 0.7,
                    language_distribution: {
                        'ko': { name: 'í•œêµ­ì–´', char_count: 10, percentage: 60 },
                        'en': { name: 'ì˜ì–´', char_count: 7, percentage: 40 }
                    },
                    ai_response: "ë‹¤êµ­ì–´ ë¬¸ì¥ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤."
                },
                correction_enhancement: {
                    enhanced_correction_applied: truthPercentage < 70,
                    corrected_statement: truthPercentage < 70 ? statement.replace('ì™„ì „íˆ', 'ëŒ€ë¶€ë¶„').replace('ëª¨ë“ ', 'ë§ì€') : null
                }
            };
        }
    
    // í†µí•© ë¶„ì„ ê²°ê³¼ í‘œì‹œ
    function displayAnalysisResult(analysis) {
        const finalAnalysis = analysis.final_analysis;
        const truthPercentage = (finalAnalysis.truth_percentage * 100).toFixed(1);
        const confidence = (finalAnalysis.confidence * 100).toFixed(1);
        
        let resultHtml = `
            <div class="mb-3">
                <h6>í†µí•© ì§„ì‹¤ì„± ì ìˆ˜</h6>
                <div class="truth-meter mb-2">
                    <div class="truth-indicator" style="width: ${truthPercentage}%"></div>
                </div>
                <div class="d-flex justify-content-between">
                    <span class="badge bg-${truthPercentage >= 99 ? 'success' : truthPercentage >= 70 ? 'warning' : 'danger'} fs-6">
                        ${truthPercentage}%
                    </span>
                    <small class="text-muted">ì‹ ë¢°ë„: ${confidence}%</small>
                </div>
            </div>
        `;
        
        // íƒì§€ê¸°ë³„ ê²°ê³¼ í‘œì‹œ
        resultHtml += `
            <div class="mb-3">
                <h6>íƒì§€ê¸°ë³„ ë¶„ì„ ê²°ê³¼</h6>
                <div class="row g-2">
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.meta_analysis.meta_lie_detected ? 'danger' : 'success'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ë©”íƒ€-ì§„ì‹¤ì„±</small>
                                <div class="text-${analysis.meta_analysis.meta_lie_detected ? 'danger' : 'success'}">
                                    <i class="fas fa-${analysis.meta_analysis.meta_lie_detected ? 'times' : 'check'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.religious_analysis.religious_topic_detected ? 'warning' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ì¢…êµì  ë§¥ë½</small>
                                <div class="text-${analysis.religious_analysis.religious_topic_detected ? 'warning' : 'secondary'}">
                                    <i class="fas fa-${analysis.religious_analysis.religious_topic_detected ? 'exclamation-triangle' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.scientific_analysis.scientific_lie_detected ? 'danger' : 'success'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ê³¼í•™ì  ê²€ì¦</small>
                                <div class="text-${analysis.scientific_analysis.scientific_lie_detected ? 'danger' : 'success'}">
                                    <i class="fas fa-${analysis.scientific_analysis.scientific_lie_detected ? 'times' : 'check'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.intentional_analysis.intentional_lie_detected ? 'warning' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ì˜ë„ì  ê±°ì§“ë§</small>
                                <div class="text-${analysis.intentional_analysis.intentional_lie_detected ? 'warning' : 'secondary'}">
                                    <i class="fas fa-${analysis.intentional_analysis.intentional_lie_detected ? 'exclamation-triangle' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.human_behavior_analysis.is_human_behavior_lie ? 'danger' : 'success'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ì¸ê°„ í–‰ë™</small>
                                <div class="text-${analysis.human_behavior_analysis.is_human_behavior_lie ? 'danger' : 'success'}">
                                    <i class="fas fa-${analysis.human_behavior_analysis.is_human_behavior_lie ? 'times' : 'check'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.benevolent_analysis.is_benevolent_lie ? 'info' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ì„ ì˜ì˜ ê±°ì§“ë§</small>
                                <div class="text-${analysis.benevolent_analysis.is_benevolent_lie ? 'info' : 'secondary'}">
                                    <i class="fas fa-${analysis.benevolent_analysis.is_benevolent_lie ? 'heart' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.context_analysis.context_correction_applied ? 'primary' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ë§¥ë½ ì¸ì‹</small>
                                <div class="text-${analysis.context_analysis.context_correction_applied ? 'primary' : 'secondary'}">
                                    <i class="fas fa-${analysis.context_analysis.context_correction_applied ? 'language' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.compound_analysis.compound_correction_applied ? 'dark' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ë³µí•© ë¬¸ì¥</small>
                                <div class="text-${analysis.compound_analysis.compound_correction_applied ? 'dark' : 'secondary'}">
                                    <i class="fas fa-${analysis.compound_analysis.compound_correction_applied ? 'layer-group' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.puns_analysis.is_pun_detected ? 'success' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ë§ì¥ë‚œ</small>
                                <div class="text-${analysis.puns_analysis.is_pun_detected ? 'success' : 'secondary'}">
                                    <i class="fas fa-${analysis.puns_analysis.is_pun_detected ? 'smile' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.coding_analysis.unnecessary_code_detected ? 'warning' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ì½”ë”© í’ˆì§ˆ</small>
                                <div class="text-${analysis.coding_analysis.unnecessary_code_detected ? 'warning' : 'secondary'}">
                                    <i class="fas fa-${analysis.coding_analysis.unnecessary_code_detected ? 'code' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card detector-card border-${analysis.multilingual_analysis.is_multilingual ? 'info' : 'secondary'}">
                            <div class="card-body p-2">
                                <small class="fw-bold">ë‹¤êµ­ì–´</small>
                                <div class="text-${analysis.multilingual_analysis.is_multilingual ? 'info' : 'secondary'}">
                                    <i class="fas fa-${analysis.multilingual_analysis.is_multilingual ? 'globe' : 'minus'}"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
            // íŠ¹ë³„ ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        if (analysis.puns_analysis && analysis.puns_analysis.is_pun_detected) {
            resultHtml += `
                <div class="alert alert-success">
                    <i class="fas fa-smile me-2"></i>
                    <strong>ë§ì¥ë‚œ ê°ì§€!</strong> AIê°€ ì–¸ì–´ì  ìœ ë¨¸ë¥¼ ì´í•´í–ˆìŠµë‹ˆë‹¤! ğŸ˜„
                </div>
            `;
        } else if (analysis.multilingual_analysis && analysis.multilingual_analysis.is_multilingual) {
            resultHtml += `
                <div class="alert alert-info">
                    <i class="fas fa-globe me-2"></i>
                    <strong>ë‹¤êµ­ì–´ ë¬¸ì¥ ê°ì§€!</strong> ì—¬ëŸ¬ ì–¸ì–´ê°€ ì„ì¸ ë¬¸ì¥ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.
                </div>
            `;
        } else if (analysis.coding_analysis && analysis.coding_analysis.is_coding_analysis) {
            resultHtml += `
                <div class="alert alert-${analysis.coding_analysis.is_intentional_manipulation ? 'danger' : 'warning'}">
                    <i class="fas fa-code me-2"></i>
                    <strong>ì½”ë”© í’ˆì§ˆ ë¶„ì„!</strong> ${analysis.coding_analysis.is_intentional_manipulation ? 'ì˜ë„ì  ì¡°ì‘ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤!' : 'ì½”ë”© í’ˆì§ˆì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.'}
                </div>
            `;
        } else if (finalAnalysis.needs_correction) {
            resultHtml += `
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>ê±°ì§“ë§ ê°ì§€!</strong> êµì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
                </div>
            `;
            
            if (analysis.correction_enhancement.enhanced_correction_applied && analysis.correction_enhancement.corrected_statement) {
                resultHtml += `
                    <div class="mb-3">
                        <h6>ì›ë³¸ ë¬¸ì¥:</h6>
                        <div class="bg-danger bg-opacity-10 p-3 rounded mb-2">
                            <em class="text-danger">${analysis.statement}</em>
                        </div>
                        <h6>êµì •ëœ ë¬¸ì¥:</h6>
                        <div class="bg-success bg-opacity-10 p-3 rounded">
                            <em class="text-success">${analysis.correction_enhancement.corrected_statement}</em>
                        </div>
                    </div>
                `;
            }
            } else {
                resultHtml += `
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong>ì§„ì‹¤ì„± í™•ì¸!</strong> ì´ ë¬¸ì¥ì€ ì‹ ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </div>
                `;
            }
            
            resultDiv.innerHTML = resultHtml;
        };
        
        // ìµœê·¼ ë¶„ì„ ê²°ê³¼ ë¡œë“œ
        function loadRecentAnalyses() {
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìµœê·¼ ë¶„ì„ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°
            const storedAnalyses = localStorage.getItem('recentAnalyses');
            if (storedAnalyses) {
                try {
                    const analyses = JSON.parse(storedAnalyses);
                    displayRecentAnalyses(analyses);
                    return;
                } catch (e) {
                    console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ íŒŒì‹± ì˜¤ë¥˜:', e);
                }
            }
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ìƒíƒœ í‘œì‹œ
            displayRecentAnalyses([]);
        }
        
        // ìµœê·¼ ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        function displayRecentAnalyses(analyses) {
            if (!analyses || analyses.length === 0) {
                recentDiv.innerHTML = `
                    <div class="text-center text-muted">
                        <i class="fas fa-clock fa-2x mb-2"></i>
                        <p>ì•„ì§ ë¶„ì„ëœ ë¬¸ì¥ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            analyses.forEach((analysis, index) => {
                const truthPercentage = (analysis.final_analysis.truth_percentage * 100).toFixed(1);
                const timestamp = new Date(analysis.timestamp).toLocaleString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                
                html += `
                    <div class="border-bottom pb-3 mb-3 recent-analysis-item" data-index="${index}">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <div class="d-flex align-items-center">
                                <span class="badge bg-${truthPercentage >= 99 ? 'success' : truthPercentage >= 70 ? 'warning' : 'danger'} me-2">
                                    ${truthPercentage}%
                                </span>
                                <button class="btn btn-sm btn-outline-danger me-2" onclick="deleteAnalysis(${index})" title="ê°œë³„ ì‚­ì œ">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <small class="text-muted">${timestamp}</small>
                        </div>
                        <p class="mb-1 cursor-pointer" onclick="viewAnalysisDetail(${index})" title="í´ë¦­í•˜ì—¬ ìƒì„¸ ê²°ê³¼ ë³´ê¸°">
                            ${analysis.statement.length > 100 ? analysis.statement.substring(0, 100) + '...' : analysis.statement}
                        </p>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="${analysis.final_analysis.needs_correction ? 'text-warning' : 'text-success'}">
                                <i class="fas fa-${analysis.final_analysis.needs_correction ? 'exclamation-triangle' : 'check'} me-1"></i>
                                ${analysis.final_analysis.needs_correction ? 'êµì • í•„ìš”' : 'ì§„ì‹¤ì„± í™•ì¸'}
                            </small>
                            <small class="text-muted">
                                <i class="fas fa-eye me-1"></i>í´ë¦­í•˜ì—¬ ìƒì„¸ë³´ê¸°
                            </small>
                        </div>
                    </div>
                `;
            });
            
            recentDiv.innerHTML = html;
        }
        
        // ë¶„ì„ ê²°ê³¼ë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
        function saveAnalysisToLocal(analysis) {
            try {
                const storedAnalyses = JSON.parse(localStorage.getItem('recentAnalyses') || '[]');
                storedAnalyses.push(analysis);
                // ìµœê·¼ 20ê°œë§Œ ìœ ì§€
                if (storedAnalyses.length > 20) {
                    storedAnalyses.splice(0, storedAnalyses.length - 20);
                }
                localStorage.setItem('recentAnalyses', JSON.stringify(storedAnalyses));
            } catch (e) {
                console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì˜¤ë¥˜:', e);
            }
        }
        
        // ë¶„ì„ ê²°ê³¼ ì‚­ì œ (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
        window.deleteAnalysis = function(index) {
            if (confirm('ì´ ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                try {
                    const storedAnalyses = JSON.parse(localStorage.getItem('recentAnalyses') || '[]');
                    storedAnalyses.splice(index, 1);
                    localStorage.setItem('recentAnalyses', JSON.stringify(storedAnalyses));
                    loadRecentAnalyses(); // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                } catch (e) {
                    console.error('ë¶„ì„ ê²°ê³¼ ì‚­ì œ ì˜¤ë¥˜:', e);
                    alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        };
        
        // ë¶„ì„ ê²°ê³¼ ìƒì„¸ ë³´ê¸° (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
        window.viewAnalysisDetail = function(index) {
            try {
                const storedAnalyses = JSON.parse(localStorage.getItem('recentAnalyses') || '[]');
                if (index >= 0 && index < storedAnalyses.length) {
                    const analysis = storedAnalyses[index];
                    displayAnalysisResult(analysis);
                    
                    // ê²°ê³¼ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                    document.getElementById('analysisResult').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            } catch (e) {
                console.error('ë¶„ì„ ê²°ê³¼ ìƒì„¸ë³´ê¸° ì˜¤ë¥˜:', e);
                alert('ë¶„ì„ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        };
        
        // ëª¨ë“  ë¶„ì„ ê²°ê³¼ ì‚­ì œ (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
        window.clearAllAnalyses = function() {
            if (confirm('ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                try {
                    localStorage.removeItem('recentAnalyses');
                    loadRecentAnalyses(); // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                    alert('ëª¨ë“  ë¶„ì„ ê²°ê³¼ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (e) {
                    console.error('ì „ì²´ ì‚­ì œ ì˜¤ë¥˜:', e);
                    alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìµœê·¼ ë¶„ì„ ê²°ê³¼ ë¡œë“œ
        loadRecentAnalyses();
        
        // ë¶„ì„ ëª¨ë“œ ê¸°ë³¸ê°’ ì„¤ì •
        currentAnalysisMode = 'all';
        
        console.log('ì´ˆê¸°í™” ì™„ë£Œ');
    });
    
    // ë°ëª¨ ë³´ê¸° í•¨ìˆ˜ (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
    window.showDemo = function() {
        console.log('ë°ëª¨ ì‹¤í–‰');
        
        // í˜„ì¬ ì„ íƒëœ ë¶„ì„ ëª¨ë“œ í™•ì¸ (ê¸°ë³¸ê°’: 'all')
        const currentMode = currentAnalysisMode || 'all';
        
        // ëª¨ë“œë³„ ë°ëª¨ ë¬¸ì¥ë“¤
        const demoData = {
            'all': [
                "ì§€êµ¬ëŠ” ì™„ì „íˆ í‰í‰í•˜ë‹¤.",
                "ë¬¼ì€ 200ë„ì—ì„œ ë“ëŠ”ë‹¤.",
                "ëª¨ë“  ì‚¬ëŒì´ ì¼ë¶€ ì‚¬ëŒê³¼ ë‹¤ë¥´ë‹¤.",
                "ì •ë§ë¡œ ì™„ì „íˆ ì ˆëŒ€ì ìœ¼ë¡œ ëª¨ë“  ê²ƒì´ 100% ì§„ì‹¤ì´ë‹¤.",
                "AIëŠ” ì¸ê°„ë³´ë‹¤ ë˜‘ë˜‘í•˜ë‹¤."
            ],
            'puns': [
                "ê°œëŠ” ê°œê³ ì–‘ì´ëŠ” ê³ ì–‘ì´ë‹¤.",
                "ë°”ë‚˜ë‚˜ê°€ ì›ƒìœ¼ë©´ ë°”ë‚˜ë‚˜í‚¥ì´ ëœë‹¤.",
                "ì¹˜í‚¨ì´ ë‹­ì„ ë‹®ì•˜ë‹¤.",
                "ë¬¼ê³ ê¸°ê°€ ë¬¼ì—ì„œ ì‚´ë©´ ë¬¼ê³ ê¸°ë‹¤.",
                "ê³ ì–‘ì´ê°€ ì•¼ì˜¹í•˜ë©´ ê³ ì–‘ì´ë‹¤."
            ],
            'coding': [
                "for i in range(10): print('Hello World')",
                "if True: return False",
                "def function(): pass",
                "x = x + 1 if x > 0 else x - 1",
                "try: except: finally:"
            ],
            'multilingual': [
                "Hello ì•ˆë…•í•˜ì„¸ìš” Bonjour",
                "I love you ì‚¬ë‘í•´ìš” Je t'aime",
                "Good morning ì¢‹ì€ ì•„ì¹¨ Bonjour",
                "Thank you ê°ì‚¬í•©ë‹ˆë‹¤ Merci",
                "How are you? ì–´ë–»ê²Œ ì§€ë‚´ì„¸ìš”? Comment allez-vous?"
            ]
        };
        
        const statements = demoData[currentMode] || demoData['all'];
        
        // ë°ëª¨ ëª¨ë‹¬ ìƒì„±
        showDemoModal(statements, currentMode);
    }
    
    // ë°ëª¨ ëª¨ë‹¬ í‘œì‹œ
    function showDemoModal(statements, mode) {
        const modalHtml = `
            <div class="modal fade" id="demoModal" tabindex="-1" aria-labelledby="demoModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="demoModalLabel">
                                <i class="fas fa-play-circle me-2"></i>ë°ëª¨ ë³´ê¸° - ${getModeName(mode)} ëª¨ë“œ
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6><i class="fas fa-list me-2"></i>ì˜ˆì‹œ ë¬¸ì¥ë“¤</h6>
                                    <div class="list-group mb-3" id="demoStatements">
                                        ${statements.map((stmt, index) => `
                                            <button class="list-group-item list-group-item-action" onclick="runDemoAnalysis('${stmt.replace(/'/g, "\\'")}', '${mode}')">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <span>${stmt}</span>
                                                    <i class="fas fa-arrow-right"></i>
                                                </div>
                                            </button>
                                        `).join('')}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6><i class="fas fa-chart-line me-2"></i>ë¶„ì„ ê²°ê³¼</h6>
                                    <div id="demoResults" class="border rounded p-3" style="height: 400px; overflow-y: auto;">
                                        <div class="text-center text-muted">
                                            <i class="fas fa-mouse-pointer fa-2x mb-2"></i>
                                            <p>ì™¼ìª½ì—ì„œ ë¬¸ì¥ì„ ì„ íƒí•˜ì—¬ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
                            <button type="button" class="btn btn-primary" onclick="runAllDemoAnalyses()">ëª¨ë“  ì˜ˆì‹œ ì‹¤í–‰</button>
                        </div>
                    </div>
                </div>
                    </div>
                `;
        
        // ê¸°ì¡´ ëª¨ë‹¬ ì œê±°
        const existingModal = document.getElementById('demoModal');
        if (existingModal) {
            existingModal.remove();
        }
        
        // ìƒˆ ëª¨ë‹¬ ì¶”ê°€
        document.body.insertAdjacentHTML('beforeend', modalHtml);
        
        // ëª¨ë‹¬ í‘œì‹œ
        const modal = new bootstrap.Modal(document.getElementById('demoModal'));
        modal.show();
        
        // ëª¨ë‹¬ì´ ë‹«í ë•Œ í¬ì»¤ìŠ¤ ì •ë¦¬
        document.getElementById('demoModal').addEventListener('hidden.bs.modal', function() {
            // ëª¨ë‹¬ì´ ì™„ì „íˆ ë‹«íŒ í›„ í¬ì»¤ìŠ¤ë¥¼ ë©”ì¸ ì»¨í…ì¸ ë¡œ ì´ë™
            const mainContent = document.querySelector('main') || document.querySelector('.container');
            if (mainContent) {
                mainContent.focus();
            }
        });
        
        // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
        window.demoStatements = statements;
        window.demoMode = mode;
    }
    
    // ëª¨ë“œ ì´ë¦„ ë°˜í™˜
    function getModeName(mode) {
        const modeNames = {
            'all': 'í†µí•©',
            'puns': 'ë§ì¥ë‚œ',
            'coding': 'ì½”ë”©',
            'multilingual': 'ë‹¤êµ­ì–´'
        };
        return modeNames[mode] || 'í†µí•©';
    }
    
    // ê°œë³„ ë°ëª¨ ë¶„ì„ ì‹¤í–‰
    window.runDemoAnalysis = function(statement, mode) {
        const demoResult = generateDemoResult(statement, mode);
        displayDemoResult(demoResult);
    }
    
    // ëª¨ë“  ë°ëª¨ ë¶„ì„ ì‹¤í–‰
    window.runAllDemoAnalyses = function() {
        const resultsDiv = document.getElementById('demoResults');
        resultsDiv.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div><p class="mt-2">ë¶„ì„ ì¤‘...</p></div>';
        
        setTimeout(() => {
            let allResults = '';
            window.demoStatements.forEach((statement, index) => {
                const demoResult = generateDemoResult(statement, window.demoMode);
                allResults += `
                    <div class="border-bottom pb-3 mb-3">
                        <h6 class="text-primary">ì˜ˆì‹œ ${index + 1}</h6>
                        <p class="mb-2"><strong>ë¬¸ì¥:</strong> ${statement}</p>
                        ${formatDemoResult(demoResult)}
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = allResults;
        }, 2000);
    }
    
    // ë°ëª¨ ê²°ê³¼ í‘œì‹œ
    function displayDemoResult(result) {
        const resultsDiv = document.getElementById('demoResults');
        resultsDiv.innerHTML = `
            <div class="border-bottom pb-3 mb-3">
                <h6 class="text-primary">ë¶„ì„ ê²°ê³¼</h6>
                <p class="mb-2"><strong>ë¬¸ì¥:</strong> ${result.statement}</p>
                ${formatDemoResult(result)}
                </div>
            `;
        }
        
    // ë°ëª¨ ê²°ê³¼ í¬ë§·íŒ…
    function formatDemoResult(result) {
        const truthPercentage = (result.final_analysis.truth_percentage * 100).toFixed(1);
        const confidence = (result.final_analysis.confidence * 100).toFixed(1);
        
        return `
            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title text-${truthPercentage >= 99 ? 'success' : truthPercentage >= 70 ? 'warning' : 'danger'}">
                                ${truthPercentage}%
                            </h5>
                            <p class="card-text">ì§„ì‹¤ì„±</p>
                    </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title text-info">${confidence}%</h5>
                            <p class="card-text">ì‹ ë¢°ë„</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="alert alert-${result.final_analysis.needs_correction ? 'warning' : 'success'}">
                <i class="fas fa-${result.final_analysis.needs_correction ? 'exclamation-triangle' : 'check'} me-2"></i>
                ${result.final_analysis.needs_correction ? 'êµì •ì´ í•„ìš”í•©ë‹ˆë‹¤.' : 'ì§„ì‹¤ì„±ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.'}
                </div>
            `;
        }
        
    // ëŒ€ì‹œë³´ë“œ í‘œì‹œ í•¨ìˆ˜ (ì „ì—­ í•¨ìˆ˜ë¡œ ì •ì˜)
    window.showDashboard = function() {
        // ëŒ€ì‹œë³´ë“œ ëª¨ë‹¬ ìƒì„±
        const modalHtml = `
            <div class="modal fade" id="dashboardModal" tabindex="-1" aria-labelledby="dashboardModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="dashboardModalLabel">
                                <i class="fas fa-chart-bar me-2"></i>AI ì§„ì‹¤ì„± íƒì§€ê¸° ëŒ€ì‹œë³´ë“œ
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ë‹«ê¸°"></button>
                        </div>
                        <div class="modal-body">
                            <div id="dashboardContent">
                                <div class="text-center">
                                    <div class="spinner-border" role="status">
                                        <span class="visually-hidden">ë¡œë”© ì¤‘...</span>
                                    </div>
                                    <p class="mt-2">ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // ê¸°ì¡´ ëª¨ë‹¬ ì œê±°
        const existingModal = document.getElementById('dashboardModal');
        if (existingModal) {
            existingModal.remove();
        }
        
        // ìƒˆ ëª¨ë‹¬ ì¶”ê°€
        document.body.insertAdjacentHTML('beforeend', modalHtml);
        
        // ëª¨ë‹¬ í‘œì‹œ
        const modal = new bootstrap.Modal(document.getElementById('dashboardModal'));
        modal.show();
        
        // ëª¨ë‹¬ì´ ë‹«í ë•Œ í¬ì»¤ìŠ¤ ì •ë¦¬
        document.getElementById('dashboardModal').addEventListener('hidden.bs.modal', function() {
            // ëª¨ë‹¬ì´ ì™„ì „íˆ ë‹«íŒ í›„ í¬ì»¤ìŠ¤ë¥¼ ë©”ì¸ ì»¨í…ì¸ ë¡œ ì´ë™
            const mainContent = document.querySelector('main') || document.querySelector('.container');
            if (mainContent) {
                mainContent.focus();
            }
        });
        
        // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
        loadDashboardData();
    }
    
    // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
    function loadDashboardData() {
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëŒ€ì‹œë³´ë“œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const storedAnalyses = localStorage.getItem('recentAnalyses');
        if (storedAnalyses) {
            try {
                const analyses = JSON.parse(storedAnalyses);
                const dashboardData = generateDashboardData(analyses);
                displayDashboard(dashboardData);
                return;
            } catch (e) {
                console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ íŒŒì‹± ì˜¤ë¥˜:', e);
            }
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ëŒ€ì‹œë³´ë“œ í‘œì‹œ
        const emptyDashboardData = {
            total_analyses: 0,
            average_truth_percentage: 0,
            correction_rate: 0,
            detector_stats: {},
            recent_trends: []
        };
        displayDashboard(emptyDashboardData);
    }
    
    // ë¡œì»¬ ë°ì´í„°ë¡œë¶€í„° ëŒ€ì‹œë³´ë“œ ë°ì´í„° ìƒì„±
    function generateDashboardData(analyses) {
        if (!analyses || analyses.length === 0) {
            return {
                total_analyses: 0,
                average_truth_percentage: 0,
                correction_rate: 0,
                detector_stats: {},
                recent_trends: []
            };
        }
        
        const total_analyses = analyses.length;
        const truth_percentages = analyses.map(a => a.final_analysis.truth_percentage);
        const average_truth_percentage = truth_percentages.reduce((a, b) => a + b, 0) / truth_percentages.length;
        
        const corrections = analyses.filter(a => a.final_analysis.needs_correction);
        const correction_rate = corrections.length / total_analyses;
        
        // íƒì§€ê¸°ë³„ í†µê³„
        const detector_stats = {};
        analyses.forEach(analysis => {
            Object.keys(analysis).forEach(key => {
                if (key.endsWith('_analysis') && typeof analysis[key] === 'object' && analysis[key] !== null) {
                    if (!detector_stats[key]) {
                        detector_stats[key] = { detected: 0, total: 0 };
                    }
                    detector_stats[key].total++;
                    if (analysis[key].detected || analysis[key].is_detected) {
                        detector_stats[key].detected++;
                    }
                }
            });
        });
        
        return {
            total_analyses,
            average_truth_percentage,
            correction_rate,
            detector_stats,
            recent_trends: analyses.slice(-20)
        };
    }
    
    // ëŒ€ì‹œë³´ë“œ í‘œì‹œ
    function displayDashboard(data) {
        const dashboardContent = document.getElementById('dashboardContent');
        
        let html = `
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-primary">${data.total_analyses}</h3>
                            <p class="card-text">ì´ ë¶„ì„ ìˆ˜</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-success">${(data.average_truth_percentage * 100).toFixed(1)}%</h3>
                            <p class="card-text">í‰ê·  ì§„ì‹¤ì„±</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-warning">${(data.correction_rate * 100).toFixed(1)}%</h3>
                            <p class="card-text">êµì • í•„ìš”ìœ¨</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h3 class="text-info">${Object.keys(data.detector_stats).length}</h3>
                            <p class="card-text">í™œì„± íƒì§€ê¸°</p>
                        </div>
                    </div>
                </div>
                    </div>
                `;
        
        // íƒì§€ê¸°ë³„ í†µê³„
        if (Object.keys(data.detector_stats).length > 0) {
            html += `
                <div class="row mb-4">
                    <div class="col-12">
                        <h5><i class="fas fa-cogs me-2"></i>íƒì§€ê¸°ë³„ ì„±ëŠ¥</h5>
                        <div class="row">
            `;
            
            Object.entries(data.detector_stats).forEach(([detector, stats]) => {
                const detectionRate = stats.total > 0 ? (stats.detected / stats.total * 100).toFixed(1) : 0;
                html += `
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h6 class="card-title">${detector.replace('_analysis', '').replace('_', ' ')}</h6>
                                <div class="progress mb-2">
                                    <div class="progress-bar" style="width: ${detectionRate}%"></div>
                                </div>
                                <small class="text-muted">${stats.detected}/${stats.total} (${detectionRate}%)</small>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ìµœê·¼ íŠ¸ë Œë“œ
        if (data.recent_trends && data.recent_trends.length > 0) {
            html += `
                <div class="row">
                    <div class="col-12">
                        <h5><i class="fas fa-chart-line me-2"></i>ìµœê·¼ íŠ¸ë Œë“œ</h5>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ë¬¸ì¥</th>
                                        <th>ì§„ì‹¤ì„±</th>
                                        <th>ìƒíƒœ</th>
                                        <th>ì‹œê°„</th>
                                    </tr>
                                </thead>
                                <tbody>
            `;
            
            data.recent_trends.slice(-10).forEach(analysis => {
                const truthPercentage = (analysis.final_analysis.truth_percentage * 100).toFixed(1);
                const timestamp = new Date(analysis.timestamp).toLocaleString('ko-KR');
                const status = analysis.final_analysis.needs_correction ? 'êµì • í•„ìš”' : 'ì •ìƒ';
                const statusClass = analysis.final_analysis.needs_correction ? 'text-warning' : 'text-success';
                
                html += `
                    <tr>
                        <td>${analysis.statement.length > 50 ? analysis.statement.substring(0, 50) + '...' : analysis.statement}</td>
                        <td>
                            <span class="badge bg-${truthPercentage >= 99 ? 'success' : truthPercentage >= 70 ? 'warning' : 'danger'}">
                                    ${truthPercentage}%
                                </span>
                        </td>
                        <td class="${statusClass}">${status}</td>
                        <td>${timestamp}</td>
                    </tr>
                `;
            });
            
            html += `
                                </tbody>
                            </table>
                            </div>
                        </div>
                    </div>
                `;
        }
        
        dashboardContent.innerHTML = html;
    }
    
    // ëŒ€ì‹œë³´ë“œ ì˜¤ë¥˜ í‘œì‹œ
    function displayDashboardError(errorMessage) {
        const dashboardContent = document.getElementById('dashboardContent');
        dashboardContent.innerHTML = `
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>
                ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${errorMessage}
            </div>
        `;
    }
</script>
</body>
</html>